--// Haidz Invisibility Hub v3.0
--// T√†ng h√¨nh to√†n di·ªán (·∫©n ng∆∞·ªùi + t√™n + ph·ª• ki·ªán + rootpart) nh∆∞ng kh√¥ng m·∫•t t√≥c/ph·ª• ki·ªán
--// Ng∆∞·ªùi d√πng th·∫•y m√¨nh m·ªù m·ªù ƒë·ªÉ d·ªÖ ƒëi·ªÅu khi·ªÉn

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- T·∫°o ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "HaidzInvisibilityGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 200, 0, 100)
Frame.Position = UDim2.new(0.5, -100, 0.1, 0)
Frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
Frame.Active = true
Frame.Draggable = true

local ToggleButton = Instance.new("TextButton", Frame)
ToggleButton.Size = UDim2.new(1,0,0.5,0)
ToggleButton.Position = UDim2.new(0,0,0,0)
ToggleButton.Text = "üü¢ B·∫≠t / T·∫Øt T√†ng H√¨nh"
ToggleButton.TextColor3 = Color3.fromRGB(255,255,255)
ToggleButton.BackgroundColor3 = Color3.fromRGB(50,50,50)

local StatusLabel = Instance.new("TextLabel", Frame)
StatusLabel.Size = UDim2.new(1,0,0.5,0)
StatusLabel.Position = UDim2.new(0,0,0.5,0)
StatusLabel.Text = "Tr·∫°ng th√°i: üü¢ Hi·ªán"
StatusLabel.TextColor3 = Color3.fromRGB(255,255,255)
StatusLabel.BackgroundColor3 = Color3.fromRGB(35,35,35)

-- H√†m set t√†ng h√¨nh
local Invisible = false
local OriginalStates = {}

local function SetTransparency(char, value, forLocal)
    for _, part in ipairs(char:GetDescendants()) do
        if part:IsA("BasePart") or part:IsA("Decal") then
            if forLocal then
                part.LocalTransparencyModifier = value -- ch·ªâ m√¨nh th·∫•y
            else
                part.Transparency = value -- ng∆∞·ªùi kh√°c th·∫•y
            end
        end
    end
end

local function ApplyInvisibility()
    local char = LocalPlayer.Character
    if not char then return end

    -- ·∫®n to√†n b·ªô v·ªõi ng∆∞·ªùi kh√°c
    SetTransparency(char, 1, false)

    -- L√†m m·ªù v·ªõi ch√≠nh m√¨nh (0.4 = h∆°i trong su·ªët)
    SetTransparency(char, 0.4, true)

    -- ·∫®n name tag
    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.NameDisplayDistance = 0
        hum.HealthDisplayDistance = 0
    end

    StatusLabel.Text = "Tr·∫°ng th√°i: üî¥ T√†ng h√¨nh"
end

local function RemoveInvisibility()
    local char = LocalPlayer.Character
    if not char then return end

    -- Kh√¥i ph·ª•c l·∫°i
    SetTransparency(char, 0, false)
    SetTransparency(char, 0, true)

    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.NameDisplayDistance = 100
        hum.HealthDisplayDistance = 100
    end

    StatusLabel.Text = "Tr·∫°ng th√°i: üü¢ Hi·ªán"
end

ToggleButton.MouseButton1Click:Connect(function()
    Invisible = not Invisible
    if Invisible then
        ApplyInvisibility()
    else
        RemoveInvisibility()
    end
end)

-- T·ª± b·∫≠t l·∫°i khi respawn
LocalPlayer.CharacterAdded:Connect(function(char)
    char:WaitForChild("HumanoidRootPart")
    if Invisible then
        task.wait(1)
        ApplyInvisibility()
    else
        RemoveInvisibility()
    end
end)
